### 中断和异常

#### 一，中断的概念和作用

> 概念

- 当中断发生时，cpu立即进入核心态
- 当中断发生后，当前运行的进程暂停运行，并由操作系统内核对中断进行处理
- 对于不同的中断信号，会进行不同的处理

发生了中断，就意味着需要操作系统介入，开展管理工作，由于操作系统的管理工作(比如进程切换，分配I/O设备等)需要使用特权指令，因此cpu要从用户态转换为核心态，中断可以使cpu从用户态切换为核心态，使操作系统获得计算机的控制权，有了中断，才能实现多道程序并发执行。

#### 二，中断的分类

- 内中断
  - 也成为异常，例外，陷入
  - 信号来源是cpu内部，与当前执行的指令有关
  - 自愿中断---指令中断：如系统调用时使用的访管指令
  - 强迫中断
    - 硬件故障 如：缺页
    - 软件中断 如：整数除0
- 外中断
  - 信号来源是cpu外部，与当前执行的指令无关
  - 外设请求 如：I/O操作完成发出的中断信号
  - 人工干预 如：用户强行终止一个进程

#### 三，外中断的处理过程

- 执行完每个指令后，cpu都要检查当前是否有外部中断信号
- 如果检测到外部中断信号，则需要保护中断进程的cpu环境
- 根据中断信号类型转入相应的中断处理程序
- 恢复原进程的cpu环境并退出中断，返回原近程继续往下执行

